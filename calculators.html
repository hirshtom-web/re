<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Real Estate Calculators</title>

  <!-- MATERIAL ICONS OUTLINED -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

   <style>

   html, body {
    font-family: 'Plus Jakarta Sans', sans-serif;    
    background: #f3f5f7;
    margin: 0;
    padding: 0;
    color: #1e0949;
    touch-action: manipulation; /* prevents unintended zooming/panning */
    overscroll-behavior: none;  /* prevents jumping on mobile */
    -webkit-text-size-adjust: 100%; /* disable font zoom on iOS */
}

    h1 {
      color: #2c3e50;
      margin-bottom: 10px;
    }

    h2.category-title {
      margin-top: 30px;
      color: #34495e;
      font-size: 20px;
      border-left: 4px solid #3498db;
      padding-left: 10px;
    }

    /* GRID LAYOUT */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
      gap: 16px;
      margin-top: 15px;
    }

    /* TILE STYLE (GOOGLE CARD STYLE) */
    .tile {
      background: white;
      border-radius: 12px;
      box-shadow: 0px 2px 6px rgba(0,0,0,0.1);
      padding: 18px;
      cursor: pointer;
      transition: all 0.25s;
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 12px;
      position: relative;
    }

    .tile:hover {
      transform: translateY(-4px);
      box-shadow: 0px 4px 12px rgba(0,0,0,0.15);
    }

    .tile.active {
      border: 2px solid #3498db;
      box-shadow: 0px 6px 16px rgba(0, 125, 255, 0.25);
    }

    /* Ripple click animation */
    .tile:active {
      transform: scale(0.97);
    }

    .tile .material-icons-outlined {
      font-size: 32px;
      color: #3498db;
    }

    /* Tooltip */
    .tile[data-tooltip] {
      position: relative;
    }
    .tile[data-tooltip]:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: -45px;
      left: 0;
      right: 0;
      margin: auto;
      width: 200px;
      padding: 6px 10px;
      background: #2c3e50;
      color: white;
      border-radius: 6px;
      font-size: 13px;
      box-shadow: 0px 2px 6px rgba(0,0,0,0.15);
      opacity: 0.95;
      z-index: 10;
      text-align: center;
    }

    input, button {
      padding: 10px;
      margin: 8px 0;
      font-size: 16px;
      width: 250px;
    }

    button {
      cursor: pointer;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 8px;
    }

    button:hover {
      background: #2980b9;
    }

    #result {
      margin-top: 12px;
      font-weight: bold;
      font-size: 18px;
    }

  </style>
</head>
<body>

  <h1 id="calculatorTitle">Select a Calculator</h1>

  <!-- CATEGORY SECTIONS -->
  <h2 class="category-title">Financing</h2>
  <div class="grid" id="cat-financing"></div>

  <h2 class="category-title">Returns</h2>
  <div class="grid" id="cat-returns"></div>

  <h2 class="category-title">Valuation</h2>
  <div class="grid" id="cat-valuation"></div>

  <h2 class="category-title">Analysis & Metrics</h2>
  <div class="grid" id="cat-analysis"></div>

  <form id="calculatorForm"></form>
  <p id="result"></p>

  <script>
    /* --------- CALCULATOR DEFINITIONS ----------- */

    const calculators = {
      cashFlow: {
        title: "Cash Flow Calculator",
        cat: "analysis",
        icon: "payments",
        tooltip: "Calculates monthly or annual cash flow after all expenses.",
        inputs: ["Income", "Expenses", "Mortgage Payment"],
        calculate: (Income, Expenses, MortgagePayment) => Income - Expenses - MortgagePayment,
      },
      cashOnCash: {
        title: "Cash-on-Cash Return",
        cat: "returns",
        icon: "percent",
        tooltip: "Shows annual ROI on actual cash invested.",
        inputs: ["Annual Cash Flow", "Total Cash Invested"],
        calculate: (CF, Invested) => ((CF / Invested) * 100).toFixed(2) + "%"
      },
      capRate: {
        title: "Cap Rate",
        cat: "valuation",
        icon: "speed",
        tooltip: "Valuation measure ignoring financing—NOI ÷ property value.",
        inputs: ["Net Operating Income", "Property Value"],
        calculate: (NOI, PV) => ((NOI / PV) * 100).toFixed(2) + "%"
      },
      grm: {
        title: "Gross Rent Multiplier",
        cat: "valuation",
        icon: "calculate",
        tooltip: "Price divided by annual rent. Lower GRM is better.",
        inputs: ["Property Price", "Annual Rent"],
        calculate: (Price, Rent) => (Price / Rent).toFixed(2)
      },
      mortgage: {
        title: "Mortgage Payment",
        cat: "financing",
        icon: "account_balance",
        tooltip: "Monthly loan payment based on rate & term.",
        inputs: ["Loan Amount", "Interest Rate (%)", "Loan Term (years)"],
        calculate: (Loan, Rate, Term) => {
          const r = Rate/100/12;
          const n = Term*12;
          return (Loan*r/(1-Math.pow(1+r, -n))).toFixed(2);
        }
      },
      breakEven: {
        title: "Break-even Analysis",
        cat: "analysis",
        icon: "bar_chart",
        tooltip: "Units needed to cover all expenses.",
        inputs: ["Fixed Costs", "Variable Costs per Unit", "Revenue per Unit"],
        calculate: (Fixed, Variable, Revenue) => (Fixed / (Revenue - Variable)).toFixed(2)
      },
      roi: {
        title: "Return on Investment",
        cat: "returns",
        icon: "trending_up",
        tooltip: "Net profit divided by investment cost.",
        inputs: ["Net Profit", "Investment Cost"],
        calculate: (Profit, Cost) => ((Profit/Cost)*100).toFixed(2) + "%"
      },
      noi: {
        title: "Net Operating Income",
        cat: "analysis",
        icon: "account_balance_wallet",
        tooltip: "Income minus operating expenses.",
        inputs: ["Gross Income", "Operating Expenses"],
        calculate: (GI, OE) => GI - OE
      },
      dscr: {
        title: "Debt Service Coverage Ratio",
        cat: "financing",
        icon: "shield",
        tooltip: "NOI ÷ debt service — lenders want 1.2+.",
        inputs: ["NOI", "Debt Service"],
        calculate: (NOI, Debt) => (NOI / Debt).toFixed(2)
      },
      priceToRent: {
        title: "Price-to-Rent Ratio",
        cat: "valuation",
        icon: "home",
        tooltip: "Home price compared to rental income.",
        inputs: ["Property Price", "Annual Rent"],
        calculate: (Price, Rent) => (Price / Rent).toFixed(2)
      },
      vacancy: {
        title: "Vacancy Rate",
        cat: "analysis",
        icon: "hotel",
        tooltip: "Vacant units ÷ total units.",
        inputs: ["Vacant Units", "Total Units"],
        calculate: (Vacant, Total) => ((Vacant/Total)*100).toFixed(2) + "%"
      },
      expenseRatio: {
        title: "Operating Expense Ratio",
        cat: "analysis",
        icon: "receipt_long",
        tooltip: "Expenses ÷ income — lower is better.",
        inputs: ["Operating Expenses", "Gross Income"],
        calculate: (E, I) => ((E/I)*100).toFixed(2) + "%"
      },
      longTermROI: {
        title: "Long-Term ROI",
        cat: "returns",
        icon: "timeline",
        tooltip: "Total rent + appreciation returns.",
        inputs: ["Rental Income", "Property Appreciation", "Investment Cost"],
        calculate: (Rent, App, Cost) => (((Rent+App)/Cost)*100).toFixed(2) + "%"
      },
      flip: {
        title: "Fix & Flip Profit",
        cat: "returns",
        icon: "construction",
        tooltip: "Sale price minus purchase & renovation costs.",
        inputs: ["Sale Price", "Purchase Price", "Renovation Costs"],
        calculate: (Sale, Purchase, Reno) => Sale - Purchase - Reno
      },
      renovationROI: {
        title: "Renovation ROI",
        cat: "returns",
        icon: "build",
        tooltip: "Return generated from renovation expenditures.",
        inputs: ["Profit from Renovation", "Renovation Cost"],
        calculate: (Profit, Cost) => ((Profit/Cost)*100).toFixed(2) + "%"
      },
      taxDepreciation: {
        title: "Tax / Depreciation Impact",
        cat: "analysis",
        icon: "receipt",
        tooltip: "Taxable income minus depreciation benefits.",
        inputs: ["Taxable Income", "Depreciation"],
        calculate: (Inc, Dep) => Inc - Dep
      },
      cma: {
        title: "Comparative Market Analysis",
        cat: "valuation",
        icon: "analytics",
        tooltip: "Property value vs market value.",
        inputs: ["Market Value", "Property Value"],
        calculate: (M, P) => ((M/P)*100).toFixed(2) + "%"
      },
      leverageROI: {
        title: "Leverage ROI",
        cat: "returns",
        icon: "trending_up",
        tooltip: "Return based on leveraged equity invested.",
        inputs: ["Cash Flow", "Equity Invested"],
        calculate: (CF, EQ) => ((CF/EQ)*100).toFixed(2) + "%"
      }
    };

    /* CATEGORY CONTAINERS */
    const categories = {
      financing: document.getElementById("cat-financing"),
      returns: document.getElementById("cat-returns"),
      valuation: document.getElementById("cat-valuation"),
      analysis: document.getElementById("cat-analysis")
    };

    /* --------- RENDER TILES ----------- */

    Object.entries(calculators).forEach(([key, c]) => {
      const tile = document.createElement("div");
      tile.className = "tile";
      tile.dataset.tooltip = c.tooltip;

      tile.innerHTML = `
        <span class="material-icons-outlined">${c.icon}</span>
        <div>${c.title}</div>
      `;

      tile.onclick = () => {
        loadCalculator(key);
        window.location.hash = key;
      };

      categories[c.cat].appendChild(tile);
    });

    /* --------- LOAD CALCULATOR ----------- */

    const form = document.getElementById("calculatorForm");
    const resultEl = document.getElementById("result");
    const titleEl = document.getElementById("calculatorTitle");
    const allTiles = document.getElementsByClassName("tile");

    function loadCalculator(key) {
      if (!calculators[key]) return;

      [...allTiles].forEach(t => t.classList.remove("active"));
      const tiles = [...allTiles];
      const index = Object.keys(calculators).indexOf(key);
      if (tiles[index]) tiles[index].classList.add("active");

      const calc = calculators[key];
      titleEl.textContent = calc.title;
      form.innerHTML = "";
      resultEl.textContent = "";

      calc.inputs.forEach(name => {
        const input = document.createElement("input");
        input.type = "number";
        input.placeholder = name;
        input.id = name;
        form.appendChild(input);
      });

      const button = document.createElement("button");
      button.textContent = "Calculate";
      button.onclick = () => {
        const values = calc.inputs.map(id => Number(document.getElementById(id).value));
        if(values.some(v => isNaN(v))) {
          resultEl.textContent = "Please fill in all inputs!";
          return;
        }
        resultEl.textContent = `Result: ${calc.calculate(...values)}`;
      };
      form.appendChild(button);
    }

    /* Load from hash on page load */
    window.addEventListener("load", () => {
      const hash = window.location.hash.replace("#", "");
      if (hash) loadCalculator(hash);
    });

  </script>

</body>
</html>
